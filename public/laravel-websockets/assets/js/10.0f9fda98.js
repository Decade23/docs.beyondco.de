(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{181:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"debug-dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug-dashboard"}},[t._v("#")]),t._v(" Debug Dashboard")]),t._v(" "),a("p",[t._v("In addition to logging the events to the console, you can also use a real-time dashboard that shows you all incoming connections, events and disconnects the moment they happen on your WebSocket server.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/dashboard.jpg",alt:"Debug Dashboard"}})]),t._v(" "),a("h2",{attrs:{id:"accessing-the-dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#accessing-the-dashboard"}},[t._v("#")]),t._v(" Accessing the Dashboard")]),t._v(" "),a("p",[t._v("The default location of the WebSocket dashboard is at "),a("code",[t._v("/laravel-websockets")]),t._v(". The routes get automatically registered.\nIf you want to change the URL of the dashboard, you can configure it with the "),a("code",[t._v("path")]),t._v(" setting in your "),a("code",[t._v("config/websockets.php")]),t._v(" file.")]),t._v(" "),a("p",[t._v("To access the debug dashboard, you can visit the dashboard URL of your Laravel project in the browser.\nSince your WebSocket server has support for multiple apps, you can select which app you want to connect to and inspect.")]),t._v(" "),a("p",[t._v('By pressing the "Connect" button, you can establish the WebSocket connection and see all events taking place on your WebSocket server from there on in real-time.')]),t._v(" "),a("p",[a("strong",[t._v("Note:")]),t._v(" Be sure to set the "),a("code",[t._v("APP_URL")]),t._v(" env variable to match the current URL where your project is running to be sure the stats graph works properly.")]),t._v(" "),a("h2",{attrs:{id:"protecting-the-dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#protecting-the-dashboard"}},[t._v("#")]),t._v(" Protecting the Dashboard")]),t._v(" "),a("p",[t._v("By default, access to the WebSocket dashboard is only allowed while your application environment is set to "),a("code",[t._v("local")]),t._v(".")]),t._v(" "),a("p",[t._v("However, you can change this behavior by overriding the Laravel Gate being used. A good place for this is the "),a("code",[t._v("AuthServiceProvider")]),t._v(" that ships with Laravel.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("boot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerPolicies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    Gate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'viewWebSocketsDashboard'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("in_array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("email")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"statistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#statistics"}},[t._v("#")]),t._v(" Statistics")]),t._v(" "),a("p",[t._v("This package allows you to record key metrics of your WebSocket server. The WebSocket server will store a snapshot of the current number of peak connections, the amount of received WebSocket messages and the amount of received API messages defined in a fixed interval. The default setting is to store a snapshot every 60 seconds.")]),t._v(" "),a("p",[t._v("In addition to simply storing the statistic information in your database, you can also see the statistics as they happen in real-time on the debug dashboard.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/statistics.gif",alt:"Real-Time Statistics"}})]),t._v(" "),a("p",[t._v("You can modify this interval by changing the "),a("code",[t._v("interval_in_seconds")]),t._v(" setting in your config file.")]),t._v(" "),a("h2",{attrs:{id:"cleanup-old-statistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cleanup-old-statistics"}},[t._v("#")]),t._v(" Cleanup old Statistics")]),t._v(" "),a("p",[t._v("After using the WebSocket server for a while you will have recorded a lot of statistical data that you might no longer need. This package provides an artisan command "),a("code",[t._v("websockets:clean")]),t._v(" to clean these statistic log entries.")]),t._v(" "),a("p",[t._v("Running this command will result in the deletion of all recorded statistics that are older than the number of days specified in the "),a("code",[t._v("delete_statistics_older_than_days")]),t._v(" setting of the config file.")]),t._v(" "),a("p",[t._v("You can leverage Laravel's scheduler to run the clean up command now and then.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//app/Console/Kernel.php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("schedule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Schedule "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$schedule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$schedule")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'websockets:clean'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("daily")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"event-creator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-creator"}},[t._v("#")]),t._v(" Event Creator")]),t._v(" "),a("p",[t._v("The dashboard also comes with an easy-to-use event creator, that lets you manually send events to your channels.")]),t._v(" "),a("p",[t._v("Simply enter the channel, the event name and provide a valid JSON payload to send it to all connected clients in the given channel.")])])}],!1,null,null,null);e.default=n.exports}}]);