(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{182:function(e,t,s){"use strict";s.r(t);var n=s(0),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v("When your application is ready to get deployed, here are some tips to improve your WebSocket server.")]),e._v(" "),e._m(1),e._v(" "),s("p",[e._v('On Unix systems, every user that connects to your WebSocket server is represented as a file somewhere on the system.\nAs a security measurement of every Unix based OS, the number of "file descriptors" an application may have open at a time is limited - most of the time to a default value of 1024 - which would result in a maximum number of 1024 concurrent users on your WebSocket server.')]),e._v(" "),s("p",[e._v('In addition to the OS restrictions, this package makes use of an event loop called "stream_select", which has a hard limit of 1024.')]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._m(12),e._v(" "),s("p",[e._v("If your are using "),s("a",{attrs:{href:"https://forge.laravel.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Forge"),s("OutboundLink")],1),e._v(" for the deployment "),s("a",{attrs:{href:"https://alex.bouma.dev/installing-laravel-websockets-on-forge",target:"_blank",rel:"noopener noreferrer"}},[e._v("this article by Alex Bouma"),s("OutboundLink")],1),e._v(" might help you out.")])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"deploying"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploying"}},[this._v("#")]),this._v(" Deploying")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"open-connection-limit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#open-connection-limit"}},[this._v("#")]),this._v(" Open Connection Limit")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"increasing-the-maximum-number-of-file-descriptors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#increasing-the-maximum-number-of-file-descriptors"}},[this._v("#")]),this._v(" Increasing the maximum number of file descriptors")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v('The operating system limit of open "file descriptors" can be increased using the '),t("code",[this._v("ulimit")]),this._v(" command. The "),t("code",[this._v("-n")]),this._v(" option modifies the number of open file descriptors.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[this._v("ulimit")]),this._v(" -n "),t("span",{pre:!0,attrs:{class:"token number"}},[this._v("10000")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("code",[this._v("ulimit")]),this._v(" command only "),t("strong",[this._v("temporarily")]),this._v(" increases the maximum number of open file descriptors. To permanently modify this value, you can edit it in your operating system "),t("code",[this._v("limits.conf")]),this._v(" file.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You are best to do so by creating a file in the "),t("code",[this._v("limits.d")]),this._v(" directory. This will work for both Red Hat & Ubuntu derivatives.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cat")]),this._v(" /etc/security/limits.d/laravel-echo.conf\nlaravel-echo\t\tsoft\t\tnofile\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[this._v("10000")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The above example assumes you will run your echo server as the "),t("code",[this._v("laravel-echo")]),this._v(" user, you are free to change that to your liking.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"changing-the-event-loop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-event-loop"}},[this._v("#")]),this._v(" Changing the event loop")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("To make use of a different event loop, that does not have a hard limit of 1024 concurrent connections, you can either install the "),t("code",[this._v("ev")]),this._v(" or "),t("code",[this._v("event")]),this._v(" PECL extension using:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" pecl "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" ev\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# or")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" pecl "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" event\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"deploying-on-laravel-forge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploying-on-laravel-forge"}},[this._v("#")]),this._v(" Deploying on Laravel Forge")])}],!1,null,null,null);t.default=a.exports}}]);